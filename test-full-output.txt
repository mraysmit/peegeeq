[INFO] Scanning for projects...
[INFO] 
[INFO] -----------------------< dev.mars:peegeeq-rest >------------------------
[INFO] Building PeeGeeQ REST API 1.0-SNAPSHOT
[INFO]   from pom.xml
[INFO] --------------------------------[ jar ]---------------------------------
[INFO] 
[INFO] --- toolchains:3.1.0:toolchain (default) @ peegeeq-rest ---
[INFO] Required toolchain: jdk [ version='21' ]
[INFO] Found matching toolchain for type jdk: JDK[C:\Users\mraysmit\.jdks\corretto-21.0.0_35]
[INFO] 
[INFO] --- enforcer:3.4.1:enforce (enforce-maven-version) @ peegeeq-rest ---
[INFO] Rule 0: org.apache.maven.enforcer.rules.version.RequireMavenVersion passed
[INFO] 
[INFO] --- jacoco:0.8.12:prepare-agent (default) @ peegeeq-rest ---
[INFO] argLine set to -javaagent:C:\\Users\\mraysmit\\.m2\\repository\\org\\jacoco\\org.jacoco.agent\\0.8.12\\org.jacoco.agent-0.8.12-runtime.jar=destfile=C:\\Users\\mraysmit\\dev\\idea-projects\\peegeeq\\peegeeq-rest\\target\\jacoco.exec
[INFO] 
[INFO] --- resources:3.3.1:resources (default-resources) @ peegeeq-rest ---
[INFO] Copying 4 resources from src\main\resources to target\classes
[INFO] 
[INFO] --- compiler:3.11.0:compile (default-compile) @ peegeeq-rest ---
[INFO] Toolchain in maven-compiler-plugin: JDK[C:\Users\mraysmit\.jdks\corretto-21.0.0_35]
[INFO] Nothing to compile - all classes are up to date
[INFO] 
[INFO] --- resources:3.3.1:testResources (default-testResources) @ peegeeq-rest ---
[INFO] Copying 1 resource from src\test\resources to target\test-classes
[INFO] 
[INFO] --- compiler:3.11.0:testCompile (default-testCompile) @ peegeeq-rest ---
[INFO] Toolchain in maven-compiler-plugin: JDK[C:\Users\mraysmit\.jdks\corretto-21.0.0_35]
[INFO] Changes detected - recompiling the module! :source
[INFO] Compiling 44 source files with javac [forked debug release 21] to target\test-classes
[INFO] 
[INFO] --- surefire:3.2.5:test (default-test) @ peegeeq-rest ---
[INFO] Toolchain in maven-surefire-plugin: JDK[C:\Users\mraysmit\.jdks\corretto-21.0.0_35]
[INFO] Using auto detected provider org.apache.maven.surefire.junitplatform.JUnitPlatformProvider
[INFO] 
[INFO] -------------------------------------------------------
[INFO]  T E S T S
[INFO] -------------------------------------------------------
[INFO] Running dev.mars.peegeeq.rest.handlers.ManagementApiIntegrationTest
2025-12-24 17:02:13.898 [main] INFO  d.m.p.r.h.ManagementApiIntegrationTest - === Setting up Management API Integration Test ===
2025-12-24 17:02:13.902 [main] INFO  d.m.peegeeq.runtime.PeeGeeQRuntime - Creating DatabaseSetupService with config: RuntimeConfig{enableNativeQueues=true, enableOutboxQueues=true, enableBiTemporalEventStore=true}
?????? PeeGeeQDatabaseSetupService class loaded!
2025-12-24 17:02:13.953 [main] INFO  d.m.p.d.s.PeeGeeQDatabaseSetupService - Database setup service initialized with EventStore factory provider
2025-12-24 17:02:13.954 [main] INFO  d.m.p.r.RuntimeDatabaseSetupService - RuntimeDatabaseSetupService initialized with delegate: PeeGeeQDatabaseSetupService
2025-12-24 17:02:13.955 [main] INFO  d.m.peegeeq.runtime.PeeGeeQRuntime - DatabaseSetupService created successfully
2025-12-24 17:02:14.364 [vert.x-eventloop-thread-0] INFO  d.m.peegeeq.rest.PeeGeeQRestServer - PeeGeeQ REST API server started on port 18097
2025-12-24 17:02:14.365 [vert.x-eventloop-thread-2] INFO  d.m.p.r.h.ManagementApiIntegrationTest - REST server deployed with ID: 1
2025-12-24 17:02:14.712 [vert.x-eventloop-thread-0] INFO  d.m.p.r.h.DatabaseSetupHandler - Creating database setup: mgmt-test-1766566933899 with 1 queues and 0 event stores
2025-12-24 17:02:14.712 [vert.x-eventloop-thread-0] INFO  d.m.p.d.s.PeeGeeQDatabaseSetupService - Schema validation passed: public
2025-12-24 17:02:14.713 [peegeeq-setup-worker] INFO  d.m.p.d.s.DatabaseTemplateManager - DatabaseTemplateManager.createDatabaseFromTemplate called for database: mgmt_api_db_1766566934365
2025-12-24 17:02:14.883 [vert.x-eventloop-thread-0] INFO  d.m.p.d.s.DatabaseTemplateManager - Database mgmt_api_db_1766566934365 does not exist, proceeding with creation
2025-12-24 17:02:14.883 [vert.x-eventloop-thread-0] INFO  d.m.p.d.s.DatabaseTemplateManager - Creating database with SQL: CREATE DATABASE mgmt_api_db_1766566934365 TEMPLATE template0 ENCODING 'UTF8'
2025-12-24 17:02:14.909 [vert.x-eventloop-thread-0] INFO  d.m.p.d.s.DatabaseTemplateManager - [PGQINF0501] Database mgmt_api_db_1766566934365 created successfully
2025-12-24 17:02:14.943 [vert.x-eventloop-thread-0] INFO  d.m.p.d.s.PeeGeeQDatabaseSetupService - [PGQINF0559] Applying base template (PostgreSQL NOTICE messages about non-existent tables are expected during fresh setup)
2025-12-24 17:02:15.055 [vert.x-eventloop-thread-0] INFO  d.m.p.db.setup.SqlTemplateProcessor - Applied template 'base' (31 SQL files)
2025-12-24 17:02:15.060 [vert.x-eventloop-thread-0] INFO  d.m.p.d.s.PeeGeeQDatabaseSetupService - [PGQINF0558] Base template verified - all required templates exist
2025-12-24 17:02:15.061 [vert.x-eventloop-thread-0] INFO  d.m.p.d.s.PeeGeeQDatabaseSetupService - [PGQINF0552] Creating queue table: mgmt_test_queue
2025-12-24 17:02:15.089 [vert.x-eventloop-thread-0] INFO  d.m.p.db.setup.SqlTemplateProcessor - Applied template 'queue' (8 SQL files)
2025-12-24 17:02:15.090 [vert.x-eventloop-thread-0] INFO  d.m.p.d.s.PeeGeeQDatabaseSetupService - [PGQINF0150] Queue table created: mgmt_test_queue
2025-12-24 17:02:15.090 [vert.x-eventloop-thread-0] INFO  d.m.p.d.s.PeeGeeQDatabaseSetupService - [PGQINF0552] Ensuring core operational tables exist (queue_messages, outbox, dead_letter_queue)
2025-12-24 17:02:15.104 [vert.x-eventloop-thread-0] INFO  d.m.p.d.s.PeeGeeQDatabaseSetupService - [PGQINF0558] All event stores created successfully
2025-12-24 17:02:15.106 [vert.x-eventloop-thread-0] INFO  d.m.p.d.s.PeeGeeQDatabaseSetupService - Creating PeeGeeQConfiguration with setupId as profile: mgmt-test-1766566933899
2025-12-24 17:02:15.110 [vert.x-eventloop-thread-0] INFO  d.m.p.db.config.PeeGeeQConfiguration - Configuration validation passed
2025-12-24 17:02:15.110 [vert.x-eventloop-thread-0] INFO  d.m.p.db.config.PeeGeeQConfiguration - Loaded PeeGeeQ configuration for profile: mgmt-test-1766566933899 with explicit database config
2025-12-24 17:02:15.110 [vert.x-eventloop-thread-0] INFO  d.m.p.d.s.PeeGeeQDatabaseSetupService - Created PeeGeeQConfiguration - profile will be: mgmt-test-1766566933899
2025-12-24 17:02:15.118 [vert.x-eventloop-thread-0] INFO  dev.mars.peegeeq.db.PeeGeeQManager - Initializing PeeGeeQ Manager with profile: mgmt-test-1766566933899
2025-12-24 17:02:15.119 [vert.x-eventloop-thread-0] WARN  io.vertx.core.impl.VertxImpl - You're already on a Vert.x context, are you sure you want to create a new Vertx instance?
2025-12-24 17:02:15.166 [vert.x-eventloop-thread-0] INFO  dev.mars.peegeeq.db.PeeGeeQManager - Created new Vert.x instance (manager ownership)
2025-12-24 17:02:15.175 [vert.x-eventloop-thread-0] INFO  d.m.p.d.c.PgConnectionManager - PgConnectionManager@4de35c4a: Initialized with Vert.x 5.x reactive support (notice handling: enabled)
2025-12-24 17:02:15.175 [vert.x-eventloop-thread-0] INFO  dev.mars.peegeeq.db.PeeGeeQManager - DB-DEBUG: Creating client with host=localhost, port=57582, db=mgmt_api_db_1766566934365, user=peegeeq_test
2025-12-24 17:02:15.178 [vert.x-eventloop-thread-0] INFO  d.m.p.d.c.PgConnectionManager - PgConnectionManager@4de35c4a: Service 'peegeeq-main' configured with search_path=public, host=localhost, db=mgmt_api_db_1766566934365
2025-12-24 17:02:15.178 [vert.x-eventloop-thread-0] INFO  d.m.p.d.c.PgConnectionManager - PgConnectionManager@4de35c4a: Service 'peegeeq-main' created reactive pool (maxSize=32, shared=true)
2025-12-24 17:02:15.183 [vert.x-eventloop-thread-0] INFO  d.m.p.db.client.PgClientFactory - Initialized reactive PG pool for client 'peegeeq-main'
2025-12-24 17:02:15.192 [vert.x-eventloop-thread-0] INFO  d.m.p.db.health.HealthCheckManager - Registered health check: database
2025-12-24 17:02:15.193 [vert.x-eventloop-thread-0] INFO  d.m.p.db.health.HealthCheckManager - Registered health check: outbox-queue
2025-12-24 17:02:15.194 [vert.x-eventloop-thread-0] INFO  d.m.p.db.health.HealthCheckManager - Registered health check: native-queue
2025-12-24 17:02:15.194 [vert.x-eventloop-thread-0] INFO  d.m.p.db.health.HealthCheckManager - Registered health check: dead-letter-queue
2025-12-24 17:02:15.195 [vert.x-eventloop-thread-0] INFO  d.m.p.db.health.HealthCheckManager - Queue health checks enabled (outbox, native-queue, dead-letter-queue)
2025-12-24 17:02:15.196 [vert.x-eventloop-thread-0] INFO  d.m.p.db.health.HealthCheckManager - Registered health check: memory
2025-12-24 17:02:15.196 [vert.x-eventloop-thread-0] INFO  d.m.p.db.health.HealthCheckManager - Registered health check: disk-space
2025-12-24 17:02:15.208 [vert.x-eventloop-thread-0] INFO  d.m.p.d.r.CircuitBreakerManager - Circuit breaker manager initialized with config: dev.mars.peegeeq.db.config.PeeGeeQConfiguration$CircuitBreakerConfig@220ac653
2025-12-24 17:02:15.209 [vert.x-eventloop-thread-0] INFO  d.m.p.d.r.BackpressureManager - Backpressure manager initialized with max concurrent operations: 50, timeout: PT30S
2025-12-24 17:02:15.215 [vert.x-eventloop-thread-0] INFO  d.m.p.d.r.StuckMessageRecoveryManager - StuckMessageRecoveryManager initialized (reactive) - enabled: true, timeout: PT5M
2025-12-24 17:02:15.229 [vert.x-eventloop-thread-0] INFO  d.m.p.db.metrics.PeeGeeQMetrics - PeeGeeQ metrics registered for instance: peegeeq-default
2025-12-24 17:02:15.231 [vert.x-eventloop-thread-0] INFO  d.m.p.d.p.PgConnectionProvider - PgConnectionManager@4de35c4a: Initialized PgConnectionProvider@4e36b579
2025-12-24 17:02:15.232 [vert.x-eventloop-thread-0] INFO  d.m.p.db.provider.PgMetricsProvider - Initialized PgMetricsProvider with instance ID: peegeeq-default
2025-12-24 17:02:15.232 [vert.x-eventloop-thread-0] INFO  d.m.p.db.provider.PgDatabaseService - PgConnectionManager@4de35c4a: Initialized PgDatabaseService@5a9f26ce
2025-12-24 17:02:15.233 [vert.x-eventloop-thread-0] INFO  d.m.p.d.p.PgQueueFactoryProvider - PgQueueFactoryProvider initialized - factories should be registered by their respective modules
2025-12-24 17:02:15.233 [vert.x-eventloop-thread-0] INFO  d.m.p.d.p.PgQueueFactoryProvider - PgQueueFactoryProvider initialized - factories will be registered by their respective modules
2025-12-24 17:02:15.233 [vert.x-eventloop-thread-0] INFO  dev.mars.peegeeq.db.PeeGeeQManager - PeeGeeQ Manager initialized successfully
2025-12-24 17:02:15.233 [vert.x-eventloop-thread-0] INFO  dev.mars.peegeeq.db.PeeGeeQManager - Starting PeeGeeQ Manager with reactive lifecycle events...
2025-12-24 17:02:15.237 [vert.x-eventloop-thread-0] INFO  dev.mars.peegeeq.db.PeeGeeQManager - Validating database connectivity...
2025-12-24 17:02:15.252 [vert.x-eventloop-thread-0] INFO  dev.mars.peegeeq.db.PeeGeeQManager - Database connectivity validated successfully
2025-12-24 17:02:15.253 [vert.x-eventloop-thread-0] INFO  dev.mars.peegeeq.db.PeeGeeQManager - Starting all PeeGeeQ components...
2025-12-24 17:02:15.253 [vert.x-eventloop-thread-0] INFO  d.m.p.db.health.HealthCheckManager - Health check manager started reactively with 100ms initial delay, interval: PT30S
2025-12-24 17:02:15.254 [vert.x-eventloop-thread-0] INFO  dev.mars.peegeeq.db.PeeGeeQManager - Started metrics collection every PT1M
2025-12-24 17:02:15.255 [vert.x-eventloop-thread-0] INFO  dev.mars.peegeeq.db.PeeGeeQManager - All PeeGeeQ components started successfully
2025-12-24 17:02:15.255 [vert.x-eventloop-thread-0] INFO  dev.mars.peegeeq.db.PeeGeeQManager - PeeGeeQ Manager started successfully
2025-12-24 17:02:15.255 [vert.x-eventloop-thread-0] INFO  d.m.p.d.s.PeeGeeQDatabaseSetupService - Validating database infrastructure for database=mgmt_api_db_1766566934365, schema=public
2025-12-24 17:02:15.275 [vert.x-eventloop-thread-1] INFO  d.m.p.d.s.PeeGeeQDatabaseSetupService - ========== DATABASE INFRASTRUCTURE VALIDATION ==========
2025-12-24 17:02:15.275 [vert.x-eventloop-thread-1] INFO  d.m.p.d.s.PeeGeeQDatabaseSetupService - Database: mgmt_api_db_1766566934365, Schema: public
2025-12-24 17:02:15.277 [vert.x-eventloop-thread-1] INFO  d.m.p.d.s.PeeGeeQDatabaseSetupService -   - consumer_group_index
2025-12-24 17:02:15.277 [vert.x-eventloop-thread-1] INFO  d.m.p.d.s.PeeGeeQDatabaseSetupService -   - dead_letter_queue
2025-12-24 17:02:15.277 [vert.x-eventloop-thread-1] INFO  d.m.p.d.s.PeeGeeQDatabaseSetupService -   - event_store_template
2025-12-24 17:02:15.278 [vert.x-eventloop-thread-1] INFO  d.m.p.d.s.PeeGeeQDatabaseSetupService -   - mgmt_test_queue
2025-12-24 17:02:15.278 [vert.x-eventloop-thread-1] INFO  d.m.p.d.s.PeeGeeQDatabaseSetupService -   - outbox
2025-12-24 17:02:15.278 [vert.x-eventloop-thread-1] INFO  d.m.p.d.s.PeeGeeQDatabaseSetupService -   - outbox_consumer_groups
2025-12-24 17:02:15.278 [vert.x-eventloop-thread-1] INFO  d.m.p.d.s.PeeGeeQDatabaseSetupService -   - outbox_topic_subscriptions
2025-12-24 17:02:15.278 [vert.x-eventloop-thread-1] INFO  d.m.p.d.s.PeeGeeQDatabaseSetupService -   - outbox_topics
2025-12-24 17:02:15.278 [vert.x-eventloop-thread-1] INFO  d.m.p.d.s.PeeGeeQDatabaseSetupService -   - pg_stat_statements
2025-12-24 17:02:15.278 [vert.x-eventloop-thread-1] INFO  d.m.p.d.s.PeeGeeQDatabaseSetupService -   - pg_stat_statements_info
2025-12-24 17:02:15.278 [vert.x-eventloop-thread-1] INFO  d.m.p.d.s.PeeGeeQDatabaseSetupService -   - processed_ledger
2025-12-24 17:02:15.278 [vert.x-eventloop-thread-1] INFO  d.m.p.d.s.PeeGeeQDatabaseSetupService -   - queue_messages
2025-12-24 17:02:15.278 [vert.x-eventloop-thread-1] INFO  d.m.p.d.s.PeeGeeQDatabaseSetupService -   - queue_template
2025-12-24 17:02:15.278 [vert.x-eventloop-thread-1] INFO  d.m.p.d.s.PeeGeeQDatabaseSetupService - ========== REQUIRED TABLES CHECK ==========
2025-12-24 17:02:15.278 [vert.x-eventloop-thread-1] INFO  d.m.p.d.s.PeeGeeQDatabaseSetupService -   queue_messages: ? EXISTS
2025-12-24 17:02:15.278 [vert.x-eventloop-thread-1] INFO  d.m.p.d.s.PeeGeeQDatabaseSetupService -   outbox: ? EXISTS
2025-12-24 17:02:15.278 [vert.x-eventloop-thread-1] INFO  d.m.p.d.s.PeeGeeQDatabaseSetupService -   dead_letter_queue: ? EXISTS
2025-12-24 17:02:15.278 [vert.x-eventloop-thread-1] INFO  d.m.p.d.s.PeeGeeQDatabaseSetupService - ========== VALIDATION PASSED ==========
2025-12-24 17:02:15.280 [vert.x-eventloop-thread-1] INFO  d.m.p.d.s.PeeGeeQDatabaseSetupService - STEP 4: Create queues and event stores
2025-12-24 17:02:15.280 [vert.x-eventloop-thread-1] INFO  d.m.p.d.s.PeeGeeQDatabaseSetupService - Applying 2 factory registration(s) to manager
2025-12-24 17:02:15.282 [vert.x-eventloop-thread-1] INFO  d.m.p.d.p.PgQueueFactoryProvider - Registered factory creator for type: native
2025-12-24 17:02:15.282 [vert.x-eventloop-thread-1] INFO  d.m.p.p.PgNativeFactoryRegistrar - Registered native queue factory with creator: NativeFactoryCreator
2025-12-24 17:02:15.283 [vert.x-eventloop-thread-1] INFO  d.m.p.d.p.PgQueueFactoryProvider - Registered factory creator for type: outbox
2025-12-24 17:02:15.283 [vert.x-eventloop-thread-1] INFO  d.m.p.outbox.OutboxFactoryRegistrar - Registered outbox queue factory
2025-12-24 17:02:15.283 [vert.x-eventloop-thread-1] INFO  d.m.p.d.s.PeeGeeQDatabaseSetupService - Factory registrations applied. Available types: [native, outbox]
2025-12-24 17:02:15.285 [vert.x-eventloop-thread-1] INFO  d.m.p.d.s.PeeGeeQDatabaseSetupService - createQueueFactories called with queues: 1
2025-12-24 17:02:15.285 [vert.x-eventloop-thread-1] INFO  d.m.p.d.s.PeeGeeQDatabaseSetupService - Using native queue factory implementation for 1 queue(s)
2025-12-24 17:02:15.285 [vert.x-eventloop-thread-1] INFO  d.m.p.d.p.PgQueueFactoryProvider - Creating queue factory of type: native
2025-12-24 17:02:15.286 [vert.x-eventloop-thread-1] INFO  d.m.p.p.PgNativeFactoryRegistrar - NativeFactoryCreator.create called with databaseService: PgDatabaseService, configuration keys: [peeGeeQConfiguration]
2025-12-24 17:02:15.286 [vert.x-eventloop-thread-1] INFO  d.m.p.p.PgNativeFactoryRegistrar - Creating PgNativeQueueFactory with config: present
2025-12-24 17:02:15.289 [vert.x-eventloop-thread-1] INFO  d.m.p.pgqueue.PgNativeQueueFactory - Initialized PgNativeQueueFactory with configuration: enabled
2025-12-24 17:02:15.290 [vert.x-eventloop-thread-1] INFO  d.m.p.p.PgNativeFactoryRegistrar - Successfully created PgNativeQueueFactory instance
2025-12-24 17:02:15.290 [vert.x-eventloop-thread-1] INFO  d.m.p.d.p.PgQueueFactoryProvider - Successfully created queue factory of type: native
2025-12-24 17:02:15.291 [vert.x-eventloop-thread-1] INFO  d.m.p.d.s.PeeGeeQDatabaseSetupService - Created native queue factory for queue: mgmt_test_queue with schema: public
2025-12-24 17:02:15.297 [vert.x-eventloop-thread-1] INFO  d.m.p.r.h.DatabaseSetupHandler - Database setup created successfully: mgmt-test-1766566933899
2025-12-24 17:02:15.308 [vert.x-eventloop-thread-2] INFO  d.m.p.r.h.ManagementApiIntegrationTest - Setup created: mgmt-test-1766566933899
2025-12-24 17:02:15.308 [vert.x-eventloop-thread-2] INFO  d.m.p.r.h.ManagementApiIntegrationTest - Test setup complete
2025-12-24 17:02:15.318 [main] INFO  d.m.p.r.h.ManagementApiIntegrationTest - === CRITICAL GAP TEST 1: Queue Purge ===
2025-12-24 17:02:15.324 [vert.x-eventloop-thread-0] INFO  d.m.p.r.h.ManagementApiHandler - Creating queue 'purge_test_queue_1766566935318' in setup 'mgmt-test-1766566933899' with config: batchSize=10, pollingInterval=PT5S, fifoEnabled=false, deadLetterQueueName=null
??? RuntimeDatabaseSetupService.addQueue called for setupId: mgmt-test-1766566933899, queueName: purge_test_queue_1766566935318
??? addQueue called for setupId: mgmt-test-1766566933899, queueName: purge_test_queue_1766566935318
2025-12-24 17:02:15.325 [vert.x-eventloop-thread-0] INFO  d.m.p.d.s.PeeGeeQDatabaseSetupService - ? addQueue called for setupId: mgmt-test-1766566933899, queueName: purge_test_queue_1766566935318
??? addQueue: setup=true, dbConfig=true, manager=true
2025-12-24 17:02:15.325 [vert.x-eventloop-thread-0] INFO  d.m.p.d.s.PeeGeeQDatabaseSetupService - ? addQueue: setup=true, dbConfig=true, manager=true
2025-12-24 17:02:15.362 [vert.x-eventloop-thread-2] INFO  d.m.p.db.setup.SqlTemplateProcessor - Applied template 'queue' (8 SQL files)
2025-12-24 17:02:15.363 [vert.x-eventloop-thread-2] INFO  d.m.p.d.s.PeeGeeQDatabaseSetupService - ? Queue table created successfully for: purge_test_queue_1766566935318
2025-12-24 17:02:15.363 [vert.x-eventloop-thread-2] INFO  d.m.p.d.s.PeeGeeQDatabaseSetupService - addQueue: About to create queue factory for queue: purge_test_queue_1766566935318
2025-12-24 17:02:15.363 [vert.x-eventloop-thread-2] INFO  d.m.p.d.s.PeeGeeQDatabaseSetupService - Creating queue factory for queue: purge_test_queue_1766566935318 in setup: mgmt-test-1766566933899
2025-12-24 17:02:15.364 [vert.x-eventloop-thread-2] INFO  d.m.p.d.s.PeeGeeQDatabaseSetupService - createQueueFactories called with queues: 1
2025-12-24 17:02:15.364 [vert.x-eventloop-thread-2] INFO  d.m.p.d.s.PeeGeeQDatabaseSetupService - Using native queue factory implementation for 1 queue(s)
2025-12-24 17:02:15.364 [vert.x-eventloop-thread-2] INFO  d.m.p.d.p.PgQueueFactoryProvider - Creating queue factory of type: native
2025-12-24 17:02:15.364 [vert.x-eventloop-thread-2] INFO  d.m.p.p.PgNativeFactoryRegistrar - NativeFactoryCreator.create called with databaseService: PgDatabaseService, configuration keys: [peeGeeQConfiguration]
2025-12-24 17:02:15.364 [vert.x-eventloop-thread-2] INFO  d.m.p.p.PgNativeFactoryRegistrar - Creating PgNativeQueueFactory with config: present
2025-12-24 17:02:15.364 [vert.x-eventloop-thread-2] INFO  d.m.p.pgqueue.PgNativeQueueFactory - Initialized PgNativeQueueFactory with configuration: enabled
2025-12-24 17:02:15.364 [vert.x-eventloop-thread-2] INFO  d.m.p.p.PgNativeFactoryRegistrar - Successfully created PgNativeQueueFactory instance
2025-12-24 17:02:15.364 [vert.x-eventloop-thread-2] INFO  d.m.p.d.p.PgQueueFactoryProvider - Successfully created queue factory of type: native
2025-12-24 17:02:15.364 [vert.x-eventloop-thread-2] INFO  d.m.p.d.s.PeeGeeQDatabaseSetupService - Created native queue factory for queue: purge_test_queue_1766566935318 with schema: public
2025-12-24 17:02:15.364 [vert.x-eventloop-thread-2] INFO  d.m.p.d.s.PeeGeeQDatabaseSetupService - ? Added queue factory for 'purge_test_queue_1766566935318' to setup 'mgmt-test-1766566933899'. Total factories: 2
2025-12-24 17:02:15.365 [vert.x-eventloop-thread-2] INFO  d.m.p.r.h.ManagementApiHandler - Queue purge_test_queue_1766566935318 created successfully in setup mgmt-test-1766566933899 with all parameters
2025-12-24 17:02:15.367 [vert.x-eventloop-thread-2] INFO  d.m.p.r.h.ManagementApiIntegrationTest - ? Queue created: purge_test_queue_1766566935318
2025-12-24 17:02:15.412 [vert.x-eventloop-thread-0] INFO  d.m.p.rest.handlers.QueueHandler - Sending message to queue purge_test_queue_1766566935318 in setup: mgmt-test-1766566933899
2025-12-24 17:02:15.412 [vert.x-eventloop-thread-0] INFO  d.m.p.pgqueue.PgNativeQueueFactory - Creating native queue producer for topic: purge_test_queue_1766566935318
2025-12-24 17:02:15.414 [vert.x-eventloop-thread-0] INFO  d.m.p.pgqueue.PgNativeQueueProducer - Created native queue producer for topic: purge_test_queue_1766566935318 with configuration: enabled
2025-12-24 17:02:15.414 [vert.x-eventloop-thread-0] INFO  d.m.p.pgqueue.PgNativeQueueProducer - No priority in headers (headers=[msg-num, messageType, payloadSize, timestamp], containsKey=false), using default: 5
2025-12-24 17:02:15.437 [vert.x-eventloop-thread-2] INFO  d.m.p.pgqueue.PgNativeQueueProducer - Closed native queue producer for topic: purge_test_queue_1766566935318
2025-12-24 17:02:15.437 [vert.x-eventloop-thread-2] INFO  d.m.p.rest.handlers.QueueHandler - Message sent successfully to queue purge_test_queue_1766566935318 in setup mgmt-test-1766566933899 with ID: 236d8f4d-c23d-4cde-b1eb-f74dc2bc59f1 (type: Object)
2025-12-24 17:02:15.440 [vert.x-eventloop-thread-0] INFO  d.m.p.rest.handlers.QueueHandler - Sending message to queue purge_test_queue_1766566935318 in setup: mgmt-test-1766566933899
2025-12-24 17:02:15.440 [vert.x-eventloop-thread-0] INFO  d.m.p.pgqueue.PgNativeQueueFactory - Creating native queue producer for topic: purge_test_queue_1766566935318
2025-12-24 17:02:15.440 [vert.x-eventloop-thread-0] INFO  d.m.p.pgqueue.PgNativeQueueProducer - Created native queue producer for topic: purge_test_queue_1766566935318 with configuration: enabled
2025-12-24 17:02:15.440 [vert.x-eventloop-thread-0] INFO  d.m.p.pgqueue.PgNativeQueueProducer - No priority in headers (headers=[msg-num, messageType, payloadSize, timestamp], containsKey=false), using default: 5
2025-12-24 17:02:15.447 [vert.x-eventloop-thread-2] INFO  d.m.p.pgqueue.PgNativeQueueProducer - Closed native queue producer for topic: purge_test_queue_1766566935318
2025-12-24 17:02:15.447 [vert.x-eventloop-thread-2] INFO  d.m.p.rest.handlers.QueueHandler - Message sent successfully to queue purge_test_queue_1766566935318 in setup mgmt-test-1766566933899 with ID: b3e5d7a7-2bc0-4a30-8dca-5f15929bf3bd (type: Object)
2025-12-24 17:02:15.449 [vert.x-eventloop-thread-0] INFO  d.m.p.rest.handlers.QueueHandler - Sending message to queue purge_test_queue_1766566935318 in setup: mgmt-test-1766566933899
2025-12-24 17:02:15.449 [vert.x-eventloop-thread-0] INFO  d.m.p.pgqueue.PgNativeQueueFactory - Creating native queue producer for topic: purge_test_queue_1766566935318
2025-12-24 17:02:15.449 [vert.x-eventloop-thread-0] INFO  d.m.p.pgqueue.PgNativeQueueProducer - Created native queue producer for topic: purge_test_queue_1766566935318 with configuration: enabled
2025-12-24 17:02:15.449 [vert.x-eventloop-thread-0] INFO  d.m.p.pgqueue.PgNativeQueueProducer - No priority in headers (headers=[msg-num, messageType, payloadSize, timestamp], containsKey=false), using default: 5
2025-12-24 17:02:15.454 [vert.x-eventloop-thread-2] INFO  d.m.p.pgqueue.PgNativeQueueProducer - Closed native queue producer for topic: purge_test_queue_1766566935318
2025-12-24 17:02:15.455 [vert.x-eventloop-thread-2] INFO  d.m.p.rest.handlers.QueueHandler - Message sent successfully to queue purge_test_queue_1766566935318 in setup mgmt-test-1766566933899 with ID: f508f15f-8d88-4b31-b7fb-c36f6295c870 (type: Object)
2025-12-24 17:02:15.456 [vert.x-eventloop-thread-0] INFO  d.m.p.rest.handlers.QueueHandler - Sending message to queue purge_test_queue_1766566935318 in setup: mgmt-test-1766566933899
2025-12-24 17:02:15.456 [vert.x-eventloop-thread-0] INFO  d.m.p.pgqueue.PgNativeQueueFactory - Creating native queue producer for topic: purge_test_queue_1766566935318
2025-12-24 17:02:15.456 [vert.x-eventloop-thread-0] INFO  d.m.p.pgqueue.PgNativeQueueProducer - Created native queue producer for topic: purge_test_queue_1766566935318 with configuration: enabled
2025-12-24 17:02:15.456 [vert.x-eventloop-thread-0] INFO  d.m.p.pgqueue.PgNativeQueueProducer - No priority in headers (headers=[msg-num, messageType, payloadSize, timestamp], containsKey=false), using default: 5
2025-12-24 17:02:15.462 [vert.x-eventloop-thread-2] INFO  d.m.p.pgqueue.PgNativeQueueProducer - Closed native queue producer for topic: purge_test_queue_1766566935318
2025-12-24 17:02:15.463 [vert.x-eventloop-thread-2] INFO  d.m.p.rest.handlers.QueueHandler - Message sent successfully to queue purge_test_queue_1766566935318 in setup mgmt-test-1766566933899 with ID: 2bccfad9-6c6b-41c3-815f-0d1ffa7b0313 (type: Object)
2025-12-24 17:02:15.465 [vert.x-eventloop-thread-0] INFO  d.m.p.rest.handlers.QueueHandler - Sending message to queue purge_test_queue_1766566935318 in setup: mgmt-test-1766566933899
2025-12-24 17:02:15.465 [vert.x-eventloop-thread-0] INFO  d.m.p.pgqueue.PgNativeQueueFactory - Creating native queue producer for topic: purge_test_queue_1766566935318
2025-12-24 17:02:15.465 [vert.x-eventloop-thread-0] INFO  d.m.p.pgqueue.PgNativeQueueProducer - Created native queue producer for topic: purge_test_queue_1766566935318 with configuration: enabled
2025-12-24 17:02:15.465 [vert.x-eventloop-thread-0] INFO  d.m.p.pgqueue.PgNativeQueueProducer - No priority in headers (headers=[msg-num, messageType, payloadSize, timestamp], containsKey=false), using default: 5
2025-12-24 17:02:15.470 [vert.x-eventloop-thread-2] INFO  d.m.p.pgqueue.PgNativeQueueProducer - Closed native queue producer for topic: purge_test_queue_1766566935318
2025-12-24 17:02:15.471 [vert.x-eventloop-thread-2] INFO  d.m.p.rest.handlers.QueueHandler - Message sent successfully to queue purge_test_queue_1766566935318 in setup mgmt-test-1766566933899 with ID: a10bb05b-f226-4df7-ae21-1913c234fa8e (type: Object)
2025-12-24 17:02:15.473 [vert.x-eventloop-thread-0] INFO  d.m.p.rest.handlers.QueueHandler - Sending message to queue purge_test_queue_1766566935318 in setup: mgmt-test-1766566933899
2025-12-24 17:02:15.473 [vert.x-eventloop-thread-0] INFO  d.m.p.pgqueue.PgNativeQueueFactory - Creating native queue producer for topic: purge_test_queue_1766566935318
2025-12-24 17:02:15.473 [vert.x-eventloop-thread-0] INFO  d.m.p.pgqueue.PgNativeQueueProducer - Created native queue producer for topic: purge_test_queue_1766566935318 with configuration: enabled
2025-12-24 17:02:15.473 [vert.x-eventloop-thread-0] INFO  d.m.p.pgqueue.PgNativeQueueProducer - No priority in headers (headers=[msg-num, messageType, payloadSize, timestamp], containsKey=false), using default: 5
2025-12-24 17:02:15.478 [vert.x-eventloop-thread-2] INFO  d.m.p.pgqueue.PgNativeQueueProducer - Closed native queue producer for topic: purge_test_queue_1766566935318
2025-12-24 17:02:15.479 [vert.x-eventloop-thread-2] INFO  d.m.p.rest.handlers.QueueHandler - Message sent successfully to queue purge_test_queue_1766566935318 in setup mgmt-test-1766566933899 with ID: 16b7f17c-3a7d-46c9-b022-0c12bfc8e2d4 (type: Object)
2025-12-24 17:02:15.480 [vert.x-eventloop-thread-0] INFO  d.m.p.rest.handlers.QueueHandler - Sending message to queue purge_test_queue_1766566935318 in setup: mgmt-test-1766566933899
2025-12-24 17:02:15.480 [vert.x-eventloop-thread-0] INFO  d.m.p.pgqueue.PgNativeQueueFactory - Creating native queue producer for topic: purge_test_queue_1766566935318
2025-12-24 17:02:15.480 [vert.x-eventloop-thread-0] INFO  d.m.p.pgqueue.PgNativeQueueProducer - Created native queue producer for topic: purge_test_queue_1766566935318 with configuration: enabled
2025-12-24 17:02:15.481 [vert.x-eventloop-thread-0] INFO  d.m.p.pgqueue.PgNativeQueueProducer - No priority in headers (headers=[msg-num, messageType, payloadSize, timestamp], containsKey=false), using default: 5
2025-12-24 17:02:15.485 [vert.x-eventloop-thread-2] INFO  d.m.p.pgqueue.PgNativeQueueProducer - Closed native queue producer for topic: purge_test_queue_1766566935318
2025-12-24 17:02:15.486 [vert.x-eventloop-thread-2] INFO  d.m.p.rest.handlers.QueueHandler - Message sent successfully to queue purge_test_queue_1766566935318 in setup mgmt-test-1766566933899 with ID: b1e3c8f7-9cc3-463e-a14d-cc3341888c11 (type: Object)
2025-12-24 17:02:15.487 [vert.x-eventloop-thread-0] INFO  d.m.p.rest.handlers.QueueHandler - Sending message to queue purge_test_queue_1766566935318 in setup: mgmt-test-1766566933899
2025-12-24 17:02:15.487 [vert.x-eventloop-thread-0] INFO  d.m.p.pgqueue.PgNativeQueueFactory - Creating native queue producer for topic: purge_test_queue_1766566935318
2025-12-24 17:02:15.487 [vert.x-eventloop-thread-0] INFO  d.m.p.pgqueue.PgNativeQueueProducer - Created native queue producer for topic: purge_test_queue_1766566935318 with configuration: enabled
2025-12-24 17:02:15.487 [vert.x-eventloop-thread-0] INFO  d.m.p.pgqueue.PgNativeQueueProducer - No priority in headers (headers=[msg-num, messageType, payloadSize, timestamp], containsKey=false), using default: 5
2025-12-24 17:02:15.492 [vert.x-eventloop-thread-2] INFO  d.m.p.pgqueue.PgNativeQueueProducer - Closed native queue producer for topic: purge_test_queue_1766566935318
2025-12-24 17:02:15.493 [vert.x-eventloop-thread-2] INFO  d.m.p.rest.handlers.QueueHandler - Message sent successfully to queue purge_test_queue_1766566935318 in setup mgmt-test-1766566933899 with ID: d39ecf1a-edaf-44c9-b49e-3ad53ee311c1 (type: Object)
2025-12-24 17:02:15.495 [vert.x-eventloop-thread-0] INFO  d.m.p.rest.handlers.QueueHandler - Sending message to queue purge_test_queue_1766566935318 in setup: mgmt-test-1766566933899
2025-12-24 17:02:15.495 [vert.x-eventloop-thread-0] INFO  d.m.p.pgqueue.PgNativeQueueFactory - Creating native queue producer for topic: purge_test_queue_1766566935318
2025-12-24 17:02:15.495 [vert.x-eventloop-thread-0] INFO  d.m.p.pgqueue.PgNativeQueueProducer - Created native queue producer for topic: purge_test_queue_1766566935318 with configuration: enabled
2025-12-24 17:02:15.495 [vert.x-eventloop-thread-0] INFO  d.m.p.pgqueue.PgNativeQueueProducer - No priority in headers (headers=[msg-num, messageType, payloadSize, timestamp], containsKey=false), using default: 5
2025-12-24 17:02:15.500 [vert.x-eventloop-thread-2] INFO  d.m.p.pgqueue.PgNativeQueueProducer - Closed native queue producer for topic: purge_test_queue_1766566935318
2025-12-24 17:02:15.500 [vert.x-eventloop-thread-2] INFO  d.m.p.rest.handlers.QueueHandler - Message sent successfully to queue purge_test_queue_1766566935318 in setup mgmt-test-1766566933899 with ID: 4858b942-b1c5-4242-82cb-1051a2310947 (type: Object)
2025-12-24 17:02:15.502 [vert.x-eventloop-thread-0] INFO  d.m.p.rest.handlers.QueueHandler - Sending message to queue purge_test_queue_1766566935318 in setup: mgmt-test-1766566933899
2025-12-24 17:02:15.502 [vert.x-eventloop-thread-0] INFO  d.m.p.pgqueue.PgNativeQueueFactory - Creating native queue producer for topic: purge_test_queue_1766566935318
2025-12-24 17:02:15.502 [vert.x-eventloop-thread-0] INFO  d.m.p.pgqueue.PgNativeQueueProducer - Created native queue producer for topic: purge_test_queue_1766566935318 with configuration: enabled
2025-12-24 17:02:15.502 [vert.x-eventloop-thread-0] INFO  d.m.p.pgqueue.PgNativeQueueProducer - No priority in headers (headers=[msg-num, messageType, payloadSize, timestamp], containsKey=false), using default: 5
2025-12-24 17:02:15.507 [vert.x-eventloop-thread-2] INFO  d.m.p.pgqueue.PgNativeQueueProducer - Closed native queue producer for topic: purge_test_queue_1766566935318
2025-12-24 17:02:15.507 [vert.x-eventloop-thread-2] INFO  d.m.p.rest.handlers.QueueHandler - Message sent successfully to queue purge_test_queue_1766566935318 in setup mgmt-test-1766566933899 with ID: 3521805a-75c4-4763-97ab-05406199d57a (type: Object)
2025-12-24 17:02:15.508 [vert.x-eventloop-thread-2] INFO  d.m.p.r.h.ManagementApiIntegrationTest - ? Sent 10 messages to queue
2025-12-24 17:02:15.509 [vert.x-eventloop-thread-0] INFO  d.m.p.r.h.ManagementApiHandler - Retrieving messages from setup: mgmt-test-1766566933899, queue: purge_test_queue_1766566935318
2025-12-24 17:02:15.527 [vert.x-eventloop-thread-2] INFO  d.m.p.r.h.ManagementApiIntegrationTest - Browse response before purge: status=200
2025-12-24 17:02:15.528 [vert.x-eventloop-thread-2] INFO  d.m.p.r.h.ManagementApiIntegrationTest - Messages in queue before purge: 10
2025-12-24 17:02:15.530 [vert.x-eventloop-thread-0] INFO  d.m.p.r.h.ManagementApiHandler - Purge queue requested for setup: mgmt-test-1766566933899, queue: purge_test_queue_1766566935318
2025-12-24 17:02:15.530 [vert.x-eventloop-thread-0] INFO  d.m.p.r.h.ManagementApiHandler - Purging queue: purge_test_queue_1766566935318 (type: native) in setup: mgmt-test-1766566933899
2025-12-24 17:02:15.530 [vert.x-eventloop-thread-0] INFO  d.m.p.r.h.ManagementApiHandler - Executing purge: purge_test_queue_1766566935318 (table: public.queue_messages)
2025-12-24 17:02:15.533 [vert.x-eventloop-thread-2] INFO  d.m.p.r.h.ManagementApiHandler - ? Purged 10 messages from queue: purge_test_queue_1766566935318 (table: public.queue_messages)
2025-12-24 17:02:15.538 [vert.x-eventloop-thread-2] INFO  d.m.p.r.h.ManagementApiIntegrationTest - ? Purged 10 messages from queue
2025-12-24 17:02:15.540 [vert.x-eventloop-thread-0] INFO  d.m.p.r.h.ManagementApiHandler - Retrieving messages from setup: mgmt-test-1766566933899, queue: purge_test_queue_1766566935318
2025-12-24 17:02:15.544 [vert.x-eventloop-thread-2] INFO  d.m.p.r.h.ManagementApiIntegrationTest - Messages in queue after purge: 0
2025-12-24 17:02:15.544 [vert.x-eventloop-thread-2] INFO  d.m.p.r.h.ManagementApiIntegrationTest - ? CRITICAL GAP 1 PASSED: Queue Purge works correctly!
2025-12-24 17:02:15.554 [main] INFO  d.m.p.r.h.ManagementApiIntegrationTest - === Tearing down Management API Integration Test ===
2025-12-24 17:02:15.555 [vert.x-eventloop-thread-0] INFO  d.m.peegeeq.rest.PeeGeeQRestServer - Stopping PeeGeeQ REST API server - closing handlers first
2025-12-24 17:02:15.555 [vert.x-eventloop-thread-0] INFO  d.m.p.r.h.WebhookSubscriptionHandler - Closing WebhookSubscriptionHandler...
2025-12-24 17:02:15.556 [vert.x-eventloop-thread-0] INFO  d.m.p.r.h.WebhookSubscriptionHandler - WebhookSubscriptionHandler closed
2025-12-24 17:02:15.556 [vert.x-eventloop-thread-0] INFO  d.m.p.r.h.ServerSentEventsHandler - Closing ServerSentEventsHandler with 0 active connections
2025-12-24 17:02:15.556 [vert.x-eventloop-thread-0] INFO  d.m.p.r.h.ServerSentEventsHandler - ServerSentEventsHandler closed
2025-12-24 17:02:15.558 [vert.x-eventloop-thread-0] INFO  d.m.peegeeq.rest.PeeGeeQRestServer - PeeGeeQ REST API server stopped
[INFO] Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 6.597 s -- in dev.mars.peegeeq.rest.handlers.ManagementApiIntegrationTest
[INFO] 
[INFO] Results:
[INFO] 
[INFO] Tests run: 1, Failures: 0, Errors: 0, Skipped: 0
[INFO] 
[INFO] 
[INFO] --- jacoco:0.8.12:report (report) @ peegeeq-rest ---
[INFO] Loading execution data file C:\Users\mraysmit\dev\idea-projects\peegeeq\peegeeq-rest\target\jacoco.exec
[INFO] Analyzed bundle 'PeeGeeQ REST API' with 31 classes
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time:  17.266 s
[INFO] Finished at: 2025-12-24T17:02:17+08:00
[INFO] ------------------------------------------------------------------------
