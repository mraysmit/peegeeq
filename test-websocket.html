<!DOCTYPE html>
<html>
<head>
    <title>WebSocket Test</title>
</head>
<body>
    <h1>WebSocket Health Check Test</h1>
    <button onclick="testWebSocket()">Test WebSocket</button>
    <button onclick="testSSE()">Test SSE</button>
    <button onclick="testREST()">Test REST</button>
    <pre id="output"></pre>

    <script>
        function log(message) {
            const output = document.getElementById('output');
            output.textContent += new Date().toISOString() + ': ' + message + '\n';
        }

        function testWebSocket() {
            log('Testing WebSocket connection to ws://localhost:8080/ws/health');
            const ws = new WebSocket('ws://localhost:8080/ws/health');
            
            ws.onopen = () => {
                log('✓ WebSocket connected!');
            };
            
            ws.onmessage = (event) => {
                log('✓ WebSocket message received: ' + event.data);
            };
            
            ws.onerror = (error) => {
                log('✗ WebSocket error: ' + error);
            };
            
            ws.onclose = () => {
                log('WebSocket closed');
            };
        }

        function testSSE() {
            log('Testing SSE connection to http://localhost:8080/api/v1/sse/health');
            const eventSource = new EventSource('http://localhost:8080/api/v1/sse/health');
            
            eventSource.onmessage = (event) => {
                log('✓ SSE message received: ' + event.data);
                eventSource.close();
            };
            
            eventSource.onerror = (error) => {
                log('✗ SSE error');
                eventSource.close();
            };
        }

        function testREST() {
            log('Testing REST connection to http://localhost:8080/api/v1/health');
            fetch('http://localhost:8080/api/v1/health')
                .then(response => response.json())
                .then(data => {
                    log('✓ REST response: ' + JSON.stringify(data));
                })
                .catch(error => {
                    log('✗ REST error: ' + error.message);
                });
        }
    </script>
</body>
</html>

