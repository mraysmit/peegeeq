2025-07-18 11:11:56.604 [main] INFO  d.m.p.e.BiTemporalEventStoreExample - ================= Starting Bi-Temporal Event Store Example =============================
2025-07-18 11:11:56.689 [main] INFO  o.t.utility.ImageNameSubstitutor - Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
2025-07-18 11:11:57.156 [main] INFO  o.t.d.DockerClientProviderStrategy - Loaded org.testcontainers.dockerclient.NpipeSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
2025-07-18 11:11:57.632 [main] INFO  o.t.d.DockerClientProviderStrategy - Found Docker environment with local Npipe socket (npipe:////./pipe/docker_engine)
2025-07-18 11:11:57.634 [main] INFO  o.testcontainers.DockerClientFactory - Docker host IP address is localhost
2025-07-18 11:11:57.658 [main] INFO  o.testcontainers.DockerClientFactory - Connected to docker: 
  Server Version: 28.3.0
  API Version: 1.51
  Operating System: Docker Desktop
  Total Memory: 15905 MB
2025-07-18 11:11:57.690 [main] INFO  tc.testcontainers/ryuk:0.5.1 - Creating container for image: testcontainers/ryuk:0.5.1
2025-07-18 11:11:57.994 [main] INFO  tc.testcontainers/ryuk:0.5.1 - Container testcontainers/ryuk:0.5.1 is starting: c00cb6c2e4b33eeea1fdf717d33069fb0980c52096ec0aef5d2bc7b2b02e5d27
2025-07-18 11:11:58.494 [main] INFO  tc.testcontainers/ryuk:0.5.1 - Container testcontainers/ryuk:0.5.1 started in PT0.8249147S
2025-07-18 11:11:58.505 [main] INFO  o.t.utility.RyukResourceReaper - Ryuk started - will monitor and terminate Testcontainers containers on JVM exit
2025-07-18 11:11:58.505 [main] INFO  o.testcontainers.DockerClientFactory - Checking the system...
2025-07-18 11:11:58.506 [main] INFO  o.testcontainers.DockerClientFactory - ✔︎ Docker server version should be at least 1.6.0
2025-07-18 11:11:58.506 [main] INFO  tc.postgres:15-alpine3.20 - Creating container for image: postgres:15-alpine3.20
2025-07-18 11:11:58.577 [main] INFO  tc.postgres:15-alpine3.20 - Container postgres:15-alpine3.20 is starting: d511e245c93aac792b1f83b46f61bc916fe56ac2109c005816ed4643a8f06d67
2025-07-18 11:12:00.236 [main] INFO  tc.postgres:15-alpine3.20 - Container postgres:15-alpine3.20 started in PT1.7298784S
2025-07-18 11:12:00.237 [main] INFO  tc.postgres:15-alpine3.20 - Container is started (JDBC URL: jdbc:postgresql://localhost:58983/peegeeq_test?loggerLevel=OFF)
2025-07-18 11:12:00.237 [main] INFO  d.m.p.e.BiTemporalEventStoreExample - PostgreSQL container started on port: 58983
2025-07-18 11:12:00.240 [main] INFO  d.m.p.db.config.PeeGeeQConfiguration - Configuration validation passed
2025-07-18 11:12:00.240 [main] INFO  d.m.p.db.config.PeeGeeQConfiguration - Loaded PeeGeeQ configuration for profile: default
2025-07-18 11:12:00.413 [main] INFO  dev.mars.peegeeq.db.PeeGeeQManager - Initializing PeeGeeQ Manager with profile: default
2025-07-18 11:12:00.426 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-07-18 11:12:00.666 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@6edaa77a
2025-07-18 11:12:00.667 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-07-18 11:12:00.674 [main] INFO  d.m.p.db.health.HealthCheckManager - Registered health check: database
2025-07-18 11:12:00.674 [main] INFO  d.m.p.db.health.HealthCheckManager - Registered health check: outbox-queue
2025-07-18 11:12:00.675 [main] INFO  d.m.p.db.health.HealthCheckManager - Registered health check: native-queue
2025-07-18 11:12:00.675 [main] INFO  d.m.p.db.health.HealthCheckManager - Registered health check: dead-letter-queue
2025-07-18 11:12:00.677 [main] INFO  d.m.p.db.health.HealthCheckManager - Registered health check: memory
2025-07-18 11:12:00.678 [main] INFO  d.m.p.db.health.HealthCheckManager - Registered health check: disk-space
2025-07-18 11:12:00.694 [main] INFO  d.m.p.d.r.CircuitBreakerManager - Circuit breaker manager initialized with config: dev.mars.peegeeq.db.config.PeeGeeQConfiguration$CircuitBreakerConfig@8a62297
2025-07-18 11:12:00.696 [main] INFO  d.m.p.d.r.BackpressureManager - Backpressure manager initialized with max concurrent operations: 50, timeout: PT30S
2025-07-18 11:12:00.720 [main] INFO  d.m.p.db.metrics.PeeGeeQMetrics - PeeGeeQ metrics registered for instance: peegeeq-default
2025-07-18 11:12:00.723 [main] INFO  d.m.p.d.p.PgConnectionProvider - Initialized PgConnectionProvider
2025-07-18 11:12:00.724 [main] INFO  d.m.p.db.provider.PgMetricsProvider - Initialized PgMetricsProvider with instance ID: peegeeq-default
2025-07-18 11:12:00.724 [main] INFO  d.m.p.db.provider.PgDatabaseService - Initialized PgDatabaseService
2025-07-18 11:12:00.726 [main] INFO  d.m.p.d.p.PgQueueFactoryProvider - Registered factory creator for type: native
2025-07-18 11:12:00.726 [main] INFO  d.m.p.d.p.PgQueueFactoryProvider - Registered factory creator for type: outbox
2025-07-18 11:12:00.726 [main] INFO  d.m.p.d.p.PgQueueFactoryProvider - Registered built-in factory types: native, outbox
2025-07-18 11:12:00.726 [main] INFO  d.m.p.d.p.PgQueueFactoryProvider - Initialized PgQueueFactoryProvider with 2 factory types
2025-07-18 11:12:00.726 [main] INFO  dev.mars.peegeeq.db.PeeGeeQManager - PeeGeeQ Manager initialized successfully
2025-07-18 11:12:00.726 [main] INFO  dev.mars.peegeeq.db.PeeGeeQManager - Starting PeeGeeQ Manager...
2025-07-18 11:12:00.726 [main] INFO  dev.mars.peegeeq.db.PeeGeeQManager - Running database migrations...
2025-07-18 11:12:00.726 [main] INFO  d.m.p.d.m.SchemaMigrationManager - Starting database migration process
2025-07-18 11:12:00.750 [main] INFO  d.m.p.d.m.SchemaMigrationManager - Found 2 pending migrations
2025-07-18 11:12:00.816 [main] INFO  d.m.p.d.m.SchemaMigrationManager - Successfully applied migration: V001
2025-07-18 11:12:00.831 [main] INFO  d.m.p.d.m.SchemaMigrationManager - Successfully applied migration: V004
2025-07-18 11:12:00.831 [main] INFO  d.m.p.d.m.SchemaMigrationManager - Migration process completed. Applied 2 migrations
2025-07-18 11:12:00.844 [main] INFO  dev.mars.peegeeq.db.PeeGeeQManager - Applied 2 database migrations
2025-07-18 11:12:00.845 [main] INFO  d.m.p.db.health.HealthCheckManager - Health check manager started with interval: PT30S
2025-07-18 11:12:00.846 [main] INFO  dev.mars.peegeeq.db.PeeGeeQManager - Started metrics collection with interval: PT1M
2025-07-18 11:12:00.847 [main] INFO  dev.mars.peegeeq.db.PeeGeeQManager - Started background maintenance tasks
2025-07-18 11:12:00.847 [main] INFO  dev.mars.peegeeq.db.PeeGeeQManager - PeeGeeQ Manager started successfully
2025-07-18 11:12:00.847 [main] INFO  d.m.p.e.BiTemporalEventStoreExample - PeeGeeQ Manager started successfully
2025-07-18 11:12:00.901 [main] INFO  d.m.p.b.BiTemporalEventStoreFactory - Creating bi-temporal event store for payload type: OrderEvent
2025-07-18 11:12:00.909 [main] INFO  d.m.p.b.PgBiTemporalEventStore - Created bi-temporal event store for payload type: OrderEvent
2025-07-18 11:12:00.910 [ForkJoinPool.commonPool-worker-1] INFO  d.m.p.e.BiTemporalEventStoreExample - === Bi-Temporal Event Store Example ===
2025-07-18 11:12:00.911 [ForkJoinPool.commonPool-worker-1] INFO  d.m.p.e.BiTemporalEventStoreExample - 
1. Appending initial events...
2025-07-18 11:12:00.996 [ForkJoinPool.commonPool-worker-1] INFO  d.m.p.e.BiTemporalEventStoreExample - Created event 1: 1b553413-23f0-4e06-be2b-3e9d8dd89a15
2025-07-18 11:12:00.996 [ForkJoinPool.commonPool-worker-1] INFO  d.m.p.e.BiTemporalEventStoreExample - Created event 2: 9cbfe300-a6df-463c-b75c-6b2822f41fb2
2025-07-18 11:12:00.996 [ForkJoinPool.commonPool-worker-1] INFO  d.m.p.e.BiTemporalEventStoreExample - 
2. Querying all events...
2025-07-18 11:12:01.050 [ForkJoinPool.commonPool-worker-1] INFO  d.m.p.e.BiTemporalEventStoreExample - Found 2 events:
2025-07-18 11:12:01.050 [ForkJoinPool.commonPool-worker-1] INFO  d.m.p.e.BiTemporalEventStoreExample -   Event: 1b553413-23f0-4e06-be2b-3e9d8dd89a15 - OrderCreated - OrderEvent{orderId='ORDER-001', customerId='CUST-123', amount=99.99, status='CREATED'}
2025-07-18 11:12:01.051 [ForkJoinPool.commonPool-worker-1] INFO  d.m.p.e.BiTemporalEventStoreExample -   Event: 9cbfe300-a6df-463c-b75c-6b2822f41fb2 - OrderCreated - OrderEvent{orderId='ORDER-002', customerId='CUST-456', amount=149.99, status='CREATED'}
2025-07-18 11:12:01.051 [ForkJoinPool.commonPool-worker-1] INFO  d.m.p.e.BiTemporalEventStoreExample - 
3. Querying by event type...
2025-07-18 11:12:01.057 [ForkJoinPool.commonPool-worker-1] INFO  d.m.p.e.BiTemporalEventStoreExample - Found 2 OrderCreated events
2025-07-18 11:12:01.057 [ForkJoinPool.commonPool-worker-1] INFO  d.m.p.e.BiTemporalEventStoreExample - 
4. Querying by aggregate...
2025-07-18 11:12:01.060 [ForkJoinPool.commonPool-worker-1] INFO  d.m.p.e.BiTemporalEventStoreExample - Found 1 events for ORDER-001
2025-07-18 11:12:01.061 [ForkJoinPool.commonPool-worker-1] INFO  d.m.p.e.BiTemporalEventStoreExample - 
5. Adding correction event...
2025-07-18 11:12:01.066 [ForkJoinPool.commonPool-worker-1] INFO  d.m.p.e.BiTemporalEventStoreExample - Created correction event: b7454fc0-2c64-4c87-9a07-93dac6db21a1
2025-07-18 11:12:01.066 [ForkJoinPool.commonPool-worker-1] INFO  d.m.p.e.BiTemporalEventStoreExample - 
6. Getting all versions of ORDER-001 event...
2025-07-18 11:12:01.070 [ForkJoinPool.commonPool-worker-1] INFO  d.m.p.e.BiTemporalEventStoreExample - Found 2 versions:
2025-07-18 11:12:01.070 [ForkJoinPool.commonPool-worker-1] INFO  d.m.p.e.BiTemporalEventStoreExample -   Version 1: 99.99 - Correction: false
2025-07-18 11:12:01.070 [ForkJoinPool.commonPool-worker-1] INFO  d.m.p.e.BiTemporalEventStoreExample -   Version 2: 89.99 - Correction: true
2025-07-18 11:12:01.070 [ForkJoinPool.commonPool-worker-1] INFO  d.m.p.e.BiTemporalEventStoreExample - 
7. Point-in-time query (before correction)...
2025-07-18 11:12:01.074 [ForkJoinPool.commonPool-worker-1] INFO  d.m.p.e.BiTemporalEventStoreExample - Event before correction: 1b553413-23f0-4e06-be2b-3e9d8dd89a15 (amount: 99.99)
2025-07-18 11:12:01.075 [ForkJoinPool.commonPool-worker-1] INFO  d.m.p.e.BiTemporalEventStoreExample - 
8. Temporal range query...
2025-07-18 11:12:01.079 [ForkJoinPool.commonPool-worker-1] INFO  d.m.p.e.BiTemporalEventStoreExample - Found 3 events in time range:
2025-07-18 11:12:01.079 [ForkJoinPool.commonPool-worker-1] INFO  d.m.p.e.BiTemporalEventStoreExample -   Event: ORDER-001 at 2025-07-18T02:12:00.911256Z
2025-07-18 11:12:01.079 [ForkJoinPool.commonPool-worker-1] INFO  d.m.p.e.BiTemporalEventStoreExample -   Event: ORDER-001 at 2025-07-18T02:12:00.911256Z
2025-07-18 11:12:01.079 [ForkJoinPool.commonPool-worker-1] INFO  d.m.p.e.BiTemporalEventStoreExample -   Event: ORDER-002 at 2025-07-18T02:22:00.911256Z
2025-07-18 11:12:01.079 [ForkJoinPool.commonPool-worker-1] INFO  d.m.p.e.BiTemporalEventStoreExample - 
9. Getting event store statistics...
2025-07-18 11:12:01.085 [ForkJoinPool.commonPool-worker-1] INFO  d.m.p.e.BiTemporalEventStoreExample - Event Store Statistics:
2025-07-18 11:12:01.085 [ForkJoinPool.commonPool-worker-1] INFO  d.m.p.e.BiTemporalEventStoreExample -   Total events: 3
2025-07-18 11:12:01.085 [ForkJoinPool.commonPool-worker-1] INFO  d.m.p.e.BiTemporalEventStoreExample -   Total corrections: 1
2025-07-18 11:12:01.085 [ForkJoinPool.commonPool-worker-1] INFO  d.m.p.e.BiTemporalEventStoreExample -   Event counts by type: {OrderCreated=3}
2025-07-18 11:12:01.085 [ForkJoinPool.commonPool-worker-1] INFO  d.m.p.e.BiTemporalEventStoreExample -   Oldest event time: 2025-07-18T02:12:00.911256Z
2025-07-18 11:12:01.085 [ForkJoinPool.commonPool-worker-1] INFO  d.m.p.e.BiTemporalEventStoreExample -   Newest event time: 2025-07-18T02:22:00.911256Z
2025-07-18 11:12:01.085 [ForkJoinPool.commonPool-worker-1] INFO  d.m.p.e.BiTemporalEventStoreExample -   Storage size: 278528 bytes
2025-07-18 11:12:01.085 [ForkJoinPool.commonPool-worker-1] INFO  d.m.p.e.BiTemporalEventStoreExample - 
======================= Bi-Temporal Event Store Example Completed Successfully ========================
2025-07-18 11:12:01.086 [main] INFO  d.m.p.b.PgBiTemporalEventStore - Closing bi-temporal event store
2025-07-18 11:12:01.086 [main] INFO  d.m.p.b.PgBiTemporalEventStore - Bi-temporal event store closed
2025-07-18 11:12:01.086 [main] INFO  dev.mars.peegeeq.db.PeeGeeQManager - Stopping PeeGeeQ Manager...
2025-07-18 11:12:01.087 [main] INFO  d.m.p.db.health.HealthCheckManager - Health check manager stopped
2025-07-18 11:12:01.087 [main] INFO  dev.mars.peegeeq.db.PeeGeeQManager - PeeGeeQ Manager stopped successfully
2025-07-18 11:12:01.088 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-07-18 11:12:01.091 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-07-18 11:12:01.434 [main] INFO  d.m.p.e.BiTemporalEventStoreExample - Bi-Temporal Event Store Example completed
